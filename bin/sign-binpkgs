#!/bin/sh

# -*- Void repository signing key -*-

REPO=/repos/void/void-packages
KEY=$HOME/.ssh/void-repo.pem
BINPKGS=$REPO/hostdir/binpkgs/*.xbps
XBPS_PASSPHRASE="foobar"

# Initialize new key for repository metadata
newkey(){
	xbps-rindex --sign --signedby "wandsas" --privkey ${KEY} ${BINPKGS}
}

# Make a signature per package
xbps-rindex --sign-pkg --privkey ${KEY} ${BINPKGS}
# Verify signed packages
xbps-query --repository=${REPO}/hostdir/binpkgs -vL
